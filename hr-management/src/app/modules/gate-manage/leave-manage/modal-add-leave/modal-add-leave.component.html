<div *nzModalTitle>
  <div>
    {{modalTitle}}
  </div>
</div>

<form nz-form [formGroup]="leaveForm" nzLayout="vertical">
  <div nz-row [nzGutter]="16">
    <div nz-col [nzSpan]="24">
      <nz-form-item>
        <nz-form-label nzRequired>Mã nhân viên</nz-form-label>
        <nz-form-control nzErrorTip="Vui lòng nhập mã nhân viên">
          <nz-input-number
            formControlName="employeeId"
            [nzMin]="1"
            [nzStep]="1"
            nzPlaceHolder="Nhập mã nhân viên"
            style="width: 100%"
          ></nz-input-number>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzSpan]="24">
      <nz-form-item>
        <nz-form-label nzRequired>Loại nghỉ phép</nz-form-label>
        <nz-form-control nzErrorTip="Vui lòng chọn loại nghỉ phép">
          <nz-select formControlName="type" nzPlaceHolder="Chọn loại nghỉ phép">
            <nz-option
              *ngFor="let type of leaveTypes"
              [nzValue]="type.value"
              [nzLabel]="type.label"
            ></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label nzRequired>Ngày bắt đầu</nz-form-label>
        <nz-form-control nzErrorTip="Vui lòng chọn ngày bắt đầu">
          <nz-date-picker
            formControlName="startDate"
            nzFormat="dd/MM/yyyy"
            nzPlaceHolder="Chọn ngày bắt đầu"
            style="width: 100%"
          ></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzSpan]="12">
      <nz-form-item>
        <nz-form-label nzRequired>Ngày kết thúc</nz-form-label>
        <nz-form-control nzErrorTip="Vui lòng chọn ngày kết thúc">
          <nz-date-picker
            formControlName="endDate"
            nzFormat="dd/MM/yyyy"
            nzPlaceHolder="Chọn ngày kết thúc"
            [nzDisabledDate]="disabledEndDate"
            style="width: 100%"
          ></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzSpan]="24">
      <nz-form-item>
        <nz-form-label nzRequired>Lý do</nz-form-label>
        <nz-form-control nzErrorTip="Vui lòng nhập lý do nghỉ phép">
          <textarea
            nz-input
            formControlName="reason"
            rows="4"
            nzPlaceHolder="Nhập lý do nghỉ phép"
            maxlength="500"
          ></textarea>
          <div class="text-end text-muted mt-1" style="font-size: 12px;">
            {{ leaveForm.get('reason')?.value?.length || 0 }}/500
          </div>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>
</form>

<div *nzModalFooter>
  <div class="text-end">
    <button
      nz-button
      nzType="default"
      type="button"
      (click)="onCancel()"
      [disabled]="isSubmitting"
    >
      Hủy
    </button>
    <button
      nz-button
      nzType="primary"
      type="button"
      (click)="onSubmit()"
      [nzLoading]="isSubmitting"
      [disabled]="isSubmitting"
    >
      Tạo mới
    </button>
  </div>
</div>

